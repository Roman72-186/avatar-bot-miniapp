# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞ –ø–æ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–µ

## –ü—Ä–æ–±–ª–µ–º–∞
–ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –ø–µ—Ä–µ—Ö–æ–¥–µ –ø–æ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–µ –±–æ—Ç –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–ª—Å—è –∏ –ø–æ–∫–∞–∑—ã–≤–∞–ª —Å—Ç–∞—Ä—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∫–∞–∂–¥—ã–π —Ä–∞–∑, —á—Ç–æ –º–µ—à–∞–ª–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º.

## –†–µ—à–µ–Ω–∏–µ

### 1. –î–æ–±–∞–≤–ª–µ–Ω username –≤ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
**–í–æ—Ä–∫—Ñ–ª–æ—É:** `[MINIAPP] bot-start-handler`
**–ù–æ–¥–∞:** "Notify Ref Signup"

**–ë—ã–ª–æ:**
```
üë§ –ù–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ—à—ë–ª –ø–æ –≤–∞—à–µ–π —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–µ!
```

**–°—Ç–∞–ª–æ:**
```
üë§ –ù–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å @username –ø–µ—Ä–µ—à—ë–ª –ø–æ –≤–∞—à–µ–π —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–µ!
```

–¢–µ–ø–µ—Ä—å –≤–ª–∞–¥–µ–ª–µ—Ü —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–∏ –≤–∏–¥–∏—Ç username –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–∏.

### 2. –û—Ç–∫–ª—é—á–µ–Ω —Ä–µ—Å—Ç–∞—Ä—Ç –±–æ—Ç–∞ –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
**–í–æ—Ä–∫—Ñ–ª–æ—É:** `[MINIAPP] bot-start-handler`
**–î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–¥—ã:**
- "Check User Exists" (SQL) - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ –ë–î
- "Is New User?" (IF) - –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –Ω–æ–≤—ã–π —ç—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–ª–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π

**–õ–æ–≥–∏–∫–∞:**
```
/start –∫–æ–º–∞–Ω–¥–∞
  ‚Üì
–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ë–î
  ‚Üì
–ù–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å?
  ‚îú‚îÄ –î–∞ ‚Üí –ü–æ–∫–∞–∑–∞—Ç—å welcome —Å–æ–æ–±—â–µ–Ω–∏–µ —Å —Ñ–æ—Ç–æ
  ‚îî‚îÄ –ù–µ—Ç ‚Üí –ù–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞—Ç—å (–Ω–µ —Ä–µ—Å—Ç–∞—Ä—Ç–∏—Ç—å –±–æ—Ç)
```

## –†–µ–∑—É–ª—å—Ç–∞—Ç

### –î–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
1. –ü–µ—Ä–µ—Ö–æ–¥ –ø–æ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–µ ‚Üí `/start ref_123`
2. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –ë–î
3. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è welcome —Å–æ–æ–±—â–µ–Ω–∏–µ
4. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Ä–µ—Ñ–µ—Ä–µ—Ä—É: "üë§ –ù–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å @username –ø–µ—Ä–µ—à—ë–ª..."

### –î–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
1. –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ –ø–æ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–µ ‚Üí `/start ref_456`
2. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –ë–î
3. –ù–∏—á–µ–≥–æ –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç (–±–æ—Ç –Ω–µ —Ä–µ—Å—Ç–∞—Ä—Ç–∏—Ç)
4. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç—É —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º –±–µ–∑ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### SQL –∑–∞–ø—Ä–æ—Å –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
```sql
SELECT COUNT(*) > 0 as user_exists
FROM users
WHERE id = '{{ $json.user_id }}';
```

### –£—Å–ª–æ–≤–∏–µ –≤ IF –Ω–æ–¥–µ:
```
user_exists == false  ‚Üí –ù–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (–ø–æ–∫–∞–∑–∞—Ç—å welcome)
user_exists == true   ‚Üí –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π (–Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å)
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –ù–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç welcome —Å–æ–æ–±—â–µ–Ω–∏–µ
- ‚úÖ –†–µ—Ñ–µ—Ä–µ—Ä –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å username –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç welcome –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º /start
- ‚úÖ –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
