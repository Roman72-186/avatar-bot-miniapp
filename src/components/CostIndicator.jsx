import { useState } from 'react';

const MODE_HELP = {
  stylize: {
    title: 'üé® –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è',
    text: '–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–æ—Ç–æ –∏ –≤—ã–±–µ—Ä–∏—Ç–µ –æ–¥–∏–Ω –∏–∑ 4 —Å—Ç–∏–ª–µ–π: –ê–Ω–∏–º–µ, –ü–∏–∫—Å–µ–ª—å-–∞—Ä—Ç, GTA, 3D –ú—É–ª—å—Ç—è—à–Ω—ã–π. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—å –æ—Ç 0% (–±–ª–∏–∂–µ –∫ –æ—Ä–∏–≥–∏–Ω–∞–ª—É) –¥–æ 100% (–º–∞–∫—Å–∏–º—É–º —Ñ–∞–Ω—Ç–∞–∑–∏–∏ AI).',
  },
  multi_photo: {
    title: 'üñºÔ∏è –ú—É–ª—å—Ç–∏-—Ñ–æ—Ç–æ',
    text: '–ó–∞–≥—Ä—É–∑–∏—Ç–µ 2‚Äì4 —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –∏ –Ω–∞–ø–∏—à–∏—Ç–µ –ø—Ä–æ–º–ø—Ç ‚Äî AI –æ–±—ä–µ–¥–∏–Ω–∏—Ç –∏—Ö –≤ –æ–¥–Ω–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ. –ù–∞–ø—Ä–∏–º–µ—Ä, –ø–æ–º–µ—Å—Ç–∏—Ç –≤–∞—Å –≤ –Ω–æ–≤—É—é –æ–±—Å—Ç–∞–Ω–æ–≤–∫—É –∏–ª–∏ —Å–æ–∑–¥–∞—Å—Ç –∫–æ–ª–ª–∞–∂.',
  },
  style_transfer: {
    title: 'ü™Ñ –ü–æ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å—É',
    text: '–ó–∞–≥—Ä—É–∑–∏—Ç–µ 1‚Äì4 —Ñ–æ—Ç–æ –∏ –æ–ø–∏—à–∏—Ç–µ –∂–µ–ª–∞–µ–º—ã–π —Å—Ç–∏–ª—å. –° –æ–¥–Ω–∏–º —Ñ–æ—Ç–æ AI —Å—Ç–∏–ª–∏–∑—É–µ—Ç –µ–≥–æ –ø–æ –ø—Ä–æ–º–ø—Ç—É, —Å –¥–≤—É–º—è –∏ –±–æ–ª–µ–µ ‚Äî –ø–µ—Ä–µ–Ω–µ—Å—ë—Ç —Å—Ç–∏–ª—å —Å —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–∞.',
  },
  photo_to_video: {
    title: 'üé¨ –§–æ—Ç–æ –≤ –≤–∏–¥–µ–æ',
    text: '–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–æ—Ç–æ ‚Äî AI –æ–∂–∏–≤–∏—Ç –µ–≥–æ –∏ —Å–æ–∑–¥–∞—Å—Ç –∫–æ—Ä–æ—Ç–∫–æ–µ –≤–∏–¥–µ–æ. –ú–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (5 –∏–ª–∏ 10 —Å–µ–∫), –∫–∞—á–µ—Å—Ç–≤–æ –∏ –¥–æ–±–∞–≤–∏—Ç—å –∑–≤—É–∫.',
  },
  lip_sync: {
    title: 'üó£Ô∏è Lip Sync',
    text: '–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–æ—Ç–æ –ª–∏—Ü–∞ –∏ –∑–∞–ø–∏—à–∏—Ç–µ –≥–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ ‚Äî AI –∞–Ω–∏–º–∏—Ä—É–µ—Ç –ª–∏—Ü–æ —Ç–∞–∫, —á—Ç–æ–±—ã –æ–Ω–æ ¬´–≥–æ–≤–æ—Ä–∏–ª–æ¬ª –≤–∞—à–∏–º –≥–æ–ª–æ—Å–æ–º.',
  },
  remove_bg: {
    title: '‚úÇÔ∏è –£–±—Ä–∞—Ç—å —Ñ–æ–Ω',
    text: '–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–æ—Ç–æ ‚Äî AI –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª–∏—Ç —Ñ–æ–Ω –∏ –≤–µ—Ä–Ω—ë—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–º —Ñ–æ–Ω–æ–º. –ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –∞–≤–∞—Ç–∞—Ä–æ–∫ –∏ —Å—Ç–∏–∫–µ—Ä–æ–≤.',
  },
  enhance: {
    title: '‚ú® –£–ª—É—á—à–∏—Ç—å',
    text: '–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–æ—Ç–æ –Ω–∏–∑–∫–æ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞ ‚Äî AI —É–≤–µ–ª–∏—á–∏—Ç —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∏ —É–ª—É—á—à–∏—Ç –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—é. –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Å—Ç–∞—Ä—ã—Ö –∏–ª–∏ —Ä–∞–∑–º—ã—Ç—ã—Ö —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π.',
  },
  text_to_image: {
    title: 'üí¨ –¢–µ–∫—Å—Ç –≤ —Ñ–æ—Ç–æ',
    text: '–û–ø–∏—à–∏—Ç–µ —Ç–µ–∫—Å—Ç–æ–º —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–≤–∏–¥–µ—Ç—å ‚Äî AI —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ –≤–∞—à–µ–º—É –æ–ø–∏—Å–∞–Ω–∏—é. –§–æ—Ç–æ –∑–∞–≥—Ä—É–∂–∞—Ç—å –Ω–µ –Ω—É–∂–Ω–æ.',
  },
  photosession: {
    title: 'üì∏ AI –§–æ—Ç–æ—Å–µ—Å—Å–∏—è',
    text: '–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–æ—Ç–æ –∏ –≤—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–º—É (–ù–æ–≤–æ–≥–æ–¥–Ω—è—è, –û—Å–µ–Ω–Ω—è—è, –°–µ–º–µ–π–Ω–∞—è, –í–µ—Å–µ–Ω–Ω—è—è). AI —Å–æ–∑–¥–∞—Å—Ç 10 —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤–∞—à–µ–π –≤–Ω–µ—à–Ω–æ—Å—Ç–∏. –†–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–∏–¥—ë—Ç –∞–ª—å–±–æ–º–æ–º –≤ —á–∞—Ç.',
  },
};

export default function CostIndicator({ starCost, freeLeft, hasFreeGenerations, starBalance, modeId }) {
  const [showHelp, setShowHelp] = useState(false);
  const hasFree = hasFreeGenerations && freeLeft > 0;
  const canAfford = hasFree || starBalance >= starCost;
  const help = MODE_HELP[modeId];

  return (
    <div className="cost-indicator-wrapper">
      <div className="cost-indicator">
        {hasFree ? (
          <span className="cost-indicator-free">
            –ë–µ—Å–ø–ª–∞—Ç–Ω–æ ({freeLeft} –æ—Å—Ç–∞–ª–æ—Å—å)
          </span>
        ) : canAfford ? (
          <span className="cost-indicator-paid">
            –°—Ç–æ–∏–º–æ—Å—Ç—å: <strong>{starCost} ‚≠ê</strong> (—É –≤–∞—Å {starBalance} ‚≠ê)
          </span>
        ) : (
          <span className="cost-indicator-insufficient">
            –°—Ç–æ–∏–º–æ—Å—Ç—å: <strong>{starCost} ‚≠ê</strong> ‚Äî –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç (—É –≤–∞—Å {starBalance} ‚≠ê)
          </span>
        )}
      </div>
      {help && (
        <button
          className="help-btn-corner"
          onClick={() => setShowHelp(!showHelp)}
          aria-label="–ü–æ–¥—Å–∫–∞–∑–∫–∞"
        >
          ?
        </button>
      )}
      {showHelp && help && (
        <div className="help-popup-overlay" onClick={() => setShowHelp(false)}>
          <div className="help-popup" onClick={(e) => e.stopPropagation()}>
            <button className="help-popup-close" onClick={() => setShowHelp(false)}>&times;</button>
            <div className="help-popup-title">{help.title}</div>
            <div className="help-popup-text">{help.text}</div>
          </div>
        </div>
      )}
    </div>
  );
}
